<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Cioban</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="/assets/css/styles.min.css?h=1efc71b03721ab3a65e5f675122c74d0">
</head>

<body><!-- Start: Navbar With Button -->
    <nav class="navbar navbar-expand-md bg-body py-3" style="margin-left: 4vw;margin-right: 4vw;">
        <div class="container"><a class="navbar-brand d-flex align-items-center" href="/01_startpage.html"><span>
                    <img src="/assets/img/logo.png?h=bdb80b2b629a6ff8137e3f6597fb9f11" alt="Navigation Icon"
                        height="30px" ;>
                </span><span style="margin-left: 10px;"> Cioban</span></a>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false"
                            data-bs-toggle="dropdown" href="">Übersichten</a>
                        <div class="dropdown-menu"><a class="dropdown-item" href="/02_personalOV.html">Personal</a><a
                                class="dropdown-item" href="/03_projectsOV.html">Projekte</a><a class="dropdown-item"
                                href="/04_departmentOV.html">Abteilungen</a><a class="dropdown-item"
                                href="/05_adressOV.html">Adressen</a></div>
                    </li>
                    <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false"
                            data-bs-toggle="dropdown" href="#">Definitionen</a>
                        <div class="dropdown-menu"><a class="dropdown-item" href="/06_typeOV.html">Typen</a><a
                                class="dropdown-item" href="/07_educationDegreeOV.html">Abschlüsse</a><a
                                class="dropdown-item" href="/08_jobOV.html">Berufe</a><a class="dropdown-item"
                                href="/09_skillOV.html">Fähigkeiten</a><a class="dropdown-item"
                                href="/10_experienceLevelOV.html">Erfahrungsstufen</a></div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="/11_searchPage.html">Suche</a></li>
                </ul><a class="navbar-brand d-flex align-items-center" href="/index.html"
                    onclick="clearStorage()"><span>
                        <img src="/assets/img/logout.png?h=199e5cad613b031525576a5c217e8b00" alt="Navigation Icon"
                            height="30px" ;>
                    </span></a>
            </div>
        </div>
    </nav><!-- End: Navbar With Button --><!-- Start: divider-text-middle -->
    <div style="text-align:center;">
        <h2 class="divider-style"><span>Projekte</span></h2>
    </div><!-- End: divider-text-middle -->
    <div id="popup-container-project" class="popup-container">
        <div id="popup-project" class="popup">
            <h2>Projekte</h2>
            <select id="auswahl-project" style="width: auto;" onchange="updateProjectInputs()">
                <option value="bearbeiten">Bearbeiten</option>
                <option value="erstellen">Erstellen</option>
                <option value="löschen">Löschen</option>
            </select>
            <div id="eingabefelder-project"></div>
            <div id="buttons-project"></div>

            <div id="error-message-project" class="error-message" style="display: none;"></div>
            <div id="success-message-project" class="success-message" style="display: none;"></div>
        </div>
    </div>
    <div id="popupContainer-project" class="popup-container">
        <div id="popupContent-project" class="popup">
            <h2>Projekt Daten</h2>
            <p id="rowData-project"></p><button id="closeBtn-project" class="btn text-truncate add-another-btn"
                style="color: black;">Schließen</button>
            <button id="edit-project" onclick="openProjectEditPersonalPopup()" class="btn text-truncate add-another-btn"
                style="color: black;">Personal verwalten</button>
        </div>
    </div>
    <div id="popup-container-editProject" class="popup-container">
        <div id="popup-editProject" class="popup">
            <h2>Projekte</h2>
            <select id="auswahl-editProject" style="width: auto;" onchange="updateProjectInputs()">
                <option value="bearbeiten">Bearbeiten</option>
                <option value="hinzufügen">Hinzufügen</option>
                <option value="löschen">Löschen</option>
            </select>
            <div id="eingabefelder-editProject"></div>
            <button class="btn text-truncate add-another-btn" style="color: black"
                onclick="closeProjectPopup()">Schließen</button>
            <button style="color: black" class="btn text-truncate add-another-btn"
                onclick="applyProjectChanges()">Anwenden</button>
            <div id="error-message-editProject" class="error-message" style="display: none;"></div>
        </div>
    </div>
    <div id="popup-container-projectEditPersonal" class="popup-container">
        <div id="popup-projectEditPersonal" class="popup">
            <h2>Projektmitglied</h2>
            <select id="auswahl-projectEditPersonal" style="width: auto;" onchange="updateProjectEditPersonalInputs()">
                <option value="anzeigen">Anzeigen</option>
                <option value="hinzufügen">Hinzufügen</option>
                <option value="löschen">Löschen</option>
            </select>
            <div id="eingabefelder-projectEditPersonal"></div>
            <div id="buttons-projectEditPersonal">

                <!--         <button style="color: black" class="btn text-truncate add-another-btn" onclick="applyEditPersonalChanges()">Anwenden</button> -->
            </div>
            <div id="error-message-projectEditPersonal" class="error-message" style="display: none;"></div>
            <div id="success-message-projectEditPersonal" class="success-message" style="display: none;"></div>
        </div>
    </div>
    <div class="orgTable" style="z-index: 1;">

        <button class="btn  text-truncate  float-sm-none add-another-btn" type="button"
            onclick="openProjectPopup()"><span style="color: rgb(0, 0, 0);">Projekt verwalten</span><i
                class="fas fa-plus-circle edit-icon"></i></button>

        <table id="projectTable" style="width:100%; overflow: auto;" border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Bezeichnung</th>
                    <th>Abteilung</th>
                    <th>Projektmanager</th>
                    <th>Priorität</th>
                    <th>Benötigte FTE</th>
                    <th>Aktuelle FTE</th>
                    <th>Startdatum</th>
                    <th>Enddatum</th>
                </tr>
            </thead>
            <tbody>

                <!-- Hier werden die Zeilen dynamisch hinzugefügt -->
            </tbody>
        </table>
    </div><!-- Start: Footer Multi Column -->
    <footer>
        <div class="container py-4 py-lg-5"
            style="background-color: lightgray;margin-left: 5vw;margin-right: 5vw;max-width: 90%;min-width: 70%;">
            <div class="row justify-content-center"><!-- Start: About -->
                <div class="col-sm-4 col-md-3 text-center text-lg-start d-flex flex-column item">
                    <h3 class="fs-6">About</h3>
                    <ul class="list-unstyled">
                        <li><a class="link-secondary" href="/12_contactPage.html">Kontakt</a></li>
                        <li><a class="link-secondary" href="/13_teamPage.html">Team</a></li>
                        <li><a class="link-secondary" href="/14_impressPage.html">Impressum</a></li>
                    </ul>
                </div><!-- End: About --><!-- Start: Social Icons -->
                <div
                    class="col-lg-3 text-center text-lg-start d-flex flex-column align-items-center order-first align-items-lg-start order-lg-last item social">
                    <div class="fw-bold d-flex align-items-center mb-2"><span
                            class="bs-icon-sm bs-icon-rounded bs-icon-primary d-flex justify-content-center align-items-center bs-icon me-2"><img
                                src="/assets/img/logo.png?h=bdb80b2b629a6ff8137e3f6597fb9f11" alt="Navigation Icon"
                                height="30px" ;></span><span>CIOBAN</span></div>
                    <p class="text-muted copyright">Der Manager Ihres Vertrauens!</p>
                </div><!-- End: Social Icons -->
            </div>
            <hr>
            <div class="d-flex justify-content-between align-items-center pt-3">
                <p class="text-muted mb-0">Copyright © 2024 Cioban</p>
                <ul class="list-inline mb-0">
                    <li class="list-inline-item"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                            fill="currentColor" viewBox="0 0 16 16" class="bi bi-facebook">
                            <path
                                d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951">
                            </path>
                        </svg></li>
                    <li class="list-inline-item"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                            fill="currentColor" viewBox="0 0 16 16" class="bi bi-twitter">
                            <path
                                d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15">
                            </path>
                        </svg></li>
                    <li class="list-inline-item"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"
                            fill="currentColor" viewBox="0 0 16 16" class="bi bi-instagram">
                            <path
                                d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334">
                            </path>
                        </svg></li>
                </ul>
            </div>
        </div>
    </footer><!-- End: Footer Multi Column -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/script.min.js?h=a03f97f77fd20b7d142d0e1704392c63"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script>


        var selectedProjectId;

        document.addEventListener('DOMContentLoaded', function () {
            var priorityValues = {
                'gering': 1,
                'niedrig': 2,
                'mittel': 3,
                'hoch': 4
            };

            var table = $('#projectTable').DataTable({
                "paging": false,
                "searching": false,
                "info": false,
                "columnDefs": [
                    {
                        "targets": [7, 8],
                        "render": function (data, type, row) {
                            if (type === 'display' && data) {
                                var date = new Date(data);
                                var day = date.getDate().toString().padStart(2, '0');
                                var month = (date.getMonth() + 1).toString().padStart(2, '0');
                                var year = date.getFullYear();
                                return day + '.' + month + '.' + year;
                            }
                            return data;
                        }
                    },
                    {
                        "targets": 3,
                        "render": function (data, type, row) {
                            if (type === 'sort') {
                                return priorityValues[data];
                            }
                            return data;
                        }
                    }
                ]
            });

            var popupContainer = document.getElementById('popupContainer-project');
            var popupContent = document.getElementById('popupContent-project');
            var rowDataDiv = document.getElementById('rowData-project');
            var closeBtn = document.getElementById('closeBtn-project');

            popupContent.style.padding = '40px';
            popupContent.style.borderRadius = '20px';
            popupContent.style.fontSize = '16px';
            popupContent.style.border = '1px solid lightgrey';
            popupContent.style.borderRadius = '5px';

            $('#projectTable tbody').on('click', 'tr', function () {
                selectedProjectId = $(this).find('td:first').text();
                var rowData = '';
                $(this).find('td').each(function (index) {
                    rowData += '<strong>' + table.columns(index).header().to$().text() + ':</strong> ' + $(this).text() + '<br>';
                });
                rowDataDiv.innerHTML = rowData;
                popupContainer.style.display = 'block';
            });

            closeBtn.onclick = function () {
                popupContainer.style.display = 'none';
            };

            fetch("https://cioban.de/api/project")
                .then(response => response.json())
                .then(data => {
                    let table = $('#projectTable').DataTable();
                    data.project.forEach(element => {
                        table.row.add([
                            element.project_id,
                            element.project_name,
                            element.department_name,
                            element.supervisor,
                            element.proj_priority,
                            element.needed_fte,
                            element.current_fte,
                            element.start_date,
                            element.end_date
                        ]).draw();
                    });
                })
                .catch(error => console.log(error));
        });

        function formatDate(dateString) {
            if (!dateString) return "";
            const parts = dateString.split('-');
            const day = parts[2];
            const month = parts[1];
            const year = parts[0];
            return `${day}.${month}.${year}`;
        }

        function openProjectEditPersonalPopup() {
            document.getElementById("popup-container-projectEditPersonal").style.display = "block";
            document.getElementById("popupContent-project").style.display = "none";
            updateProjectEditPersonalInputs();
        }

        function closeEditPersonalPopup() {
            document.getElementById("popup-container-projectEditPersonal").style.display = "none";
            document.getElementById("popupContent-project").style.display = "block";
            document.getElementById("error-message-project").style.display = "none";
        }

        function updateProjectEditPersonalInputs() {
            var auswahl = document.getElementById("auswahl-projectEditPersonal").value;
            var eingabefelderDiv = document.getElementById("eingabefelder-projectEditPersonal");
            var buttonsDiv = document.getElementById("buttons-projectEditPersonal");
            eingabefelderDiv.innerHTML = "";
            buttonsDiv.innerHTML = "";


            var closeBtn = document.createElement("button");
            closeBtn.textContent = "Zurück";
            closeBtn.style.color = "black";
            closeBtn.className = "btn text-truncate add-another-btn";
            closeBtn.onclick = function () {
                closeEditPersonalPopup();
            };
            buttonsDiv.appendChild(closeBtn);

            if (auswahl === "anzeigen") {
                fetch(`https://cioban.de/api/project/employee/${selectedProjectId}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.employee && data.employee.length > 0) {
                            var table = "<table style='overflow:auto'><tr><th>ID</th><th>Vorname</th><th>Name</th><th>Freie FTE</th><th>Mail</th><th>Tel. Nummer</th><th>Beschäftigungsstart</th><th>Erfahrungsgrad</th><th>Typ</th><th>Teams</th></tr>";
                            data.employee.forEach(person => {
                                table += "<tr>";
                                table += "<td>" + person.employee_id + "</td>";
                                table += "<td>" + person.first_name + "</td>";
                                table += "<td>" + person.last_name + "</td>";
                                table += "<td>" + person.free_fte + "</td>";
                                table += "<td>" + person.e_mail + "</td>";
                                table += "<td>" + person.phone_number + "</td>";
                                table += "<td>" + person.entry_date + "</td>";
                                table += "<td>" + person.exp_lvl_description + "</td>";
                                table += "<td>" + person.type_name + "</td>";
                                table += "<td>" + person.team_name + "</td>";
                                table += "</tr>";
                            });
                            table += "</table>";
                            eingabefelderDiv.innerHTML = table;
                        } else {
                            eingabefelderDiv.innerHTML = "Keine Daten vorhanden.";
                        }
                    })
                    .catch(error => console.error(error));
            } else if (auswahl === "hinzufügen") {
                fetch(`https://cioban.de/api/project/team/${selectedProjectId}/`)
                    .then(response => response.json())
                    .then(data => {
                        var teamDropdown = document.createElement("select");
                        teamDropdown.style.width = "100%"; // Dropdown so breit wie das Eingabefeld
                        teamDropdown.placeholder = "Team auswählen";
                        teamDropdown.id = "teamDropdown";

                        data.team.forEach(team => {
                            var option = document.createElement("option");
                            option.value = team.team_id;
                            option.text = team.team_name;
                            teamDropdown.appendChild(option);
                        });

                        eingabefelderDiv.insertBefore(teamDropdown, eingabefelderDiv.firstChild); // Dropdown vor dem Eingabefeld einfügen
                    })
                    .catch(error => console.error('Error fetching teams:', error));

                var employeeId = document.createElement("input");
                employeeId.type = "text";
                employeeId.placeholder = "Mitarbeiter ID";
                eingabefelderDiv.appendChild(employeeId);

                var assignedFte = document.createElement("input");
                assignedFte.type = "text";
                assignedFte.placeholder = "FTE";
                eingabefelderDiv.appendChild(assignedFte);

                var applyButton = document.createElement("button");
                applyButton.textContent = "Hinzufügen";
                applyButton.style.color = "black";
                applyButton.className = "btn text-truncate add-another-btn";
                applyButton.onclick = function () {
                    applyAddEmployeeTeam();
                };
                buttonsDiv.appendChild(applyButton);

            } else if (auswahl === "löschen") {
                fetch(`https://cioban.de/api/project/team/${selectedProjectId}/`)
                    .then(response => response.json())
                    .then(data => {
                        var teamDropdown = document.createElement("select");
                        teamDropdown.style.width = "100%"; // Dropdown so breit wie das Eingabefeld
                        teamDropdown.placeholder = "Team auswählen";
                        teamDropdown.id = "teamDropdownDelete";

                        data.team.forEach(team => {
                            var option = document.createElement("option");
                            option.value = team.team_id;
                            option.text = team.team_name;
                            teamDropdown.appendChild(option);
                        });

                        eingabefelderDiv.insertBefore(teamDropdown, eingabefelderDiv.firstChild); // Dropdown vor dem Eingabefeld einfügen

                        teamDropdown.addEventListener('change', function () {
                            var selectedTeamId = teamDropdown.value;
                            loadEmployeesDropdown(selectedTeamId);
                        });
                    })
                    .catch(error => console.error('Error fetching teams:', error));
            }

            function loadEmployeesDropdown(teamId) {
                var buttonsDiv = document.getElementById("buttons-projectEditPersonal");
                fetch(`https://cioban.de/api/team/employee/${teamId}`)
                    .then(response => response.json())
                    .then(data => {
                        var employeeDropdown = document.getElementById("employeeDropdown");

                        if (employeeDropdown) {
                            // Wenn ein Dropdown bereits existiert, lösche alle vorhandenen Optionen
                            while (employeeDropdown.firstChild) {
                                employeeDropdown.removeChild(employeeDropdown.firstChild);
                            }
                        } else {
                            // Wenn kein Dropdown vorhanden ist, erstelle ein neues
                            employeeDropdown = document.createElement("select");
                            employeeDropdown.style.width = "100%"; // Dropdown so breit wie das Eingabefeld
                            employeeDropdown.placeholder = "Mitarbeiter auswählen";
                            employeeDropdown.id = "employeeDropdown";
                            eingabefelderDiv.appendChild(employeeDropdown); // Mitarbeiter-Dropdown hinzufügen
                        }

                        data.employee.forEach(employee => {
                            var option = document.createElement("option");
                            option.value = employee.employee_id;
                            option.text = `${employee.first_name} ${employee.last_name}`; // Vor- und Nachname zusammenfügen
                            employeeDropdown.appendChild(option);
                        });

                        eingabefelderDiv.appendChild(employeeDropdown); // Mitarbeiter-Dropdown hinzufügen
                    })
                    .catch(error => console.error('Error fetching employees:', error));
                var applyButton = document.getElementById("applyDeleteButton");

                if (!applyButton) {
                    // Wenn der Button noch nicht existiert, erstelle ihn
                    applyButton = document.createElement("button");
                    applyButton.textContent = "Löschen";
                    applyButton.style.color = "black";
                    applyButton.className = "btn text-truncate add-another-btn";
                    applyButton.id = "applyDeleteButton";
                    applyButton.onclick = function () {
                        applyDeleteEmployeeTeam();
                    };
                    buttonsDiv.appendChild(applyButton);
                }
            }

        }

        async function applyAddEmployeeTeam() {
            if (validateProjectEditPersonal()) {
                var employeeId = document.querySelector('input[type="text"]').value;
                var assignedFte = document.getElementById("assignedFte");
                var teamId = document.getElementById("teamDropdown").value;


                console.log(assignedFte.value);
                console.log([{ team_id: teamId, employee_id: employeeId, assigned_fte: assignedFte.value }]);

                try {
                    var response = await fetch(`https://cioban.de/api/team/employee/`, {
                        method: "POST",
                        body: JSON.stringify([{ team_id: teamId, employee_id: employeeId, assigned_fte: assignedFte }]),
                        headers: {
                            "Content-Type": "application/json",
                        },
                    });

                    if (!response.ok) {
                        throw new Error("Fehler beim Erstellen des Mitarbeiters");
                    }

                    console.log("Erstellung erfolgreich!");
                    displaySuccessMessageEditProject("Hinzufügen erfolgreich!");
                } catch (error) {
                    console.error("Fehler beim Erstellen des Mitarbeiters:", error);
                    displayErrorMessageEditProject("Fehler beim hinzufügen.");
                }
            } else {
                document.getElementById("error-message-projectEditPersonal").style.display = "block";
                document.getElementById("error-message-projectEditPersonal").innerHTML = "Bitte füllen Sie alle Felder aus!";
            }
        }
        function applyDeleteEmployeeTeam() {
            if (validateProjectEditPersonal()) {
                //hier soll ein ein Mitarbeiter einem Team und somit einem Projekt gelöscht werden
                var employeeId = document.getElementById("employeeDropdown").value;
                var teamId = document.getElementById("teamDropdownDelete").value;

                console.log(teamId, employeeId);

                fetch(`https://cioban.de/api/team/employee/`, {
                    method: "DELETE",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        team_id: teamId,
                        employee_id: employeeId
                    })
                })
                    .then(response => {
                        if (response.ok) {
                            console.log("Mitarbeiter erfolgreich gelöscht!");
                            displaySuccessMessageEditProject("Löschen erfolgreich!");
                        } else {
                            console.error("Fehler beim Löschen des Mitarbeiters");
                            displayErrorMessageEditProject("Fehler beim Löschen.");
                        }
                    })
                    .catch(error => console.error("Fehler beim Löschen des Mitarbeiters:", error));
            } else {
                document.getElementById("error-message-projectEditPersonal").style.display = "block";
                document.getElementById("error-message-projectEditPersonal").innerHTML = "Bitte füllen Sie alle Felder aus!";
            }
        }

        function validateProjectEditPersonal() {
            var inputs = document.querySelectorAll(
                '#eingabefelder-projectEditPersonal input[type="text"]'
            );
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].value.trim() === "") {
                    return false;
                }
            }
            return true;
        }


        function displayErrorMessageEditProject(message) {
            var errorMessage = document.getElementById("error-message-projectEditPersonal");
            errorMessage.textContent = message;
            errorMessage.style.display = "block";

            setTimeout(function () {
                errorMessage.style.display = "none";
            }, 2000); // Nachricht wird nach 7 Sekunden ausgeblendet
        }

        function displaySuccessMessageEditProject(message) {
            var successMessage = document.getElementById("success-message-projectEditPersonal");
            successMessage.textContent = message;
            successMessage.style.display = "block";
            successMessage.style.color = "green";

            setTimeout(function () {
                successMessage.style.display = "none";
            }, 2000); // Nachricht wird nach 7 Sekunden ausgeblendet
        }


    </script>
</body>

</html>