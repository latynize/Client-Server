function checkLogin(){window.location.href="01_startpage.html"}function openPopup(){document.getElementById("popup-container").style.display="block",updateInputs()}function closePopup(){document.getElementById("popup-container").style.display="none",document.getElementById("error-message").style.display="none",document.getElementById("success-message").style.display="none",location.reload()}function updateInputs(){document.getElementById("error-message").style.display="none",document.getElementById("success-message").style.display="none",document.getElementById("auswahl").style.display="block";var e=document.getElementById("auswahl").value,t=document.getElementById("eingabefelder"),n=document.getElementById("buttons");t.innerHTML="",n.innerHTML="";var o=document.createElement("button");if(o.textContent="Schließen",o.className="btn text-truncate add-another-btn",o.style.color="black",o.onclick=closePopup,n.appendChild(o),"bearbeiten"===e)(r=document.createElement("input")).type="text",r.placeholder="ID",t.appendChild(r),(a=document.createElement("button")).textContent="Bearbeiten",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=function(){openEdit(r.value)},n.appendChild(a);else if("löschen"===e){var r;(r=document.createElement("input")).type="text",r.placeholder="ID",t.appendChild(r),(a=document.createElement("button")).textContent="Löschen",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=applyDelete,n.appendChild(a)}else if("erstellen"===e){var a;["Vorname","Name","Freie FTE","Mail","Tel. Nr.","Beschäftigungsstart YYYY-MM-DD","Erfahrungsgrad ID","Typ ID","Adress ID"].forEach((function(e){var n=document.createElement("input");n.type="text",n.placeholder=e,t.appendChild(n)})),(a=document.createElement("button")).textContent="Erstellen",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=applyCreate,n.appendChild(a)}}function validateInputs(){for(var e=document.querySelectorAll('#eingabefelder input[type="text"]'),t=0;t<e.length;t++)if(""===e[t].value.trim())return!1;return!0}function getInputsValues(){var e=document.querySelectorAll('#eingabefelder input[type="text"]'),t={first_name:"",last_name:"",free_fte:0,e_mail:"",phone_number:"",entry_date:"",experience_level_id:0,type_id:0,address_id:0};return e.forEach((function(e){var n=e.placeholder.toLowerCase(),o=e.value.trim();switch(n){case"vorname":t.first_name=o;break;case"name":t.last_name=o;break;case"freie fte":t.free_fte=parseFloat(o)||0;break;case"mail":t.e_mail=o;break;case"tel. nr.":t.phone_number=o;break;case"beschäftigungsstart yyyy-mm-dd":t.entry_date=o;break;case"erfahrungsgrad id":t.experience_level_id=parseInt(o)||0;break;case"typ id":t.type_id=parseInt(o)||0;break;case"adress id":t.address_id=parseInt(o)||0}})),t}function displayErrorMessage(e){var t=document.getElementById("error-message");t.textContent=e,t.style.display="block",setTimeout((function(){t.style.display="none"}),7e3)}function displaySuccessMessage(e){var t=document.getElementById("success-message");t.textContent=e,t.style.display="block",t.style.color="green",setTimeout((function(){t.style.display="none"}),7e3)}async function openEdit(e){if(validateInputs()){var t=document.getElementById("auswahl"),n=document.getElementById("eingabefelder"),o=document.getElementById("buttons");t.style.display="none",n.innerHTML="",o.innerHTML="";["Vorname","Name","Freie FTE","Mail","Tel. Nr.","Beschäftigungsstart YYYY-MM-DD","Erfahrungsgrad ID","Typ ID","Adress ID"].forEach((function(e){var t=document.createElement("input");t.type="text",t.placeholder=e,n.appendChild(t)}));var r=document.createElement("button");r.textContent="Schließen",r.className="btn text-truncate add-another-btn",r.style.color="black",r.onclick=updateInputs,o.appendChild(r);var a=document.createElement("button");a.textContent="Bearbeiten",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=function(){applyEdit(e)},o.appendChild(a),fillEditFields(e)}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}async function fillEditFields(e){try{const t=await fetch(`https://cioban.de/api/employee/${e}`,{method:"GET"});if(!t.ok)throw new Error("Fehler beim Abrufen der Mitarbeiterinformationen");console.log("Mitarbeiterinformationen erfolgreich abgerufen!");const n=(await t.json()).employee[0];console.log(n),document.querySelector('#eingabefelder input[type="text"][placeholder="Vorname"]').value=n.first_name,document.querySelector('#eingabefelder input[type="text"][placeholder="Name"]').value=n.last_name,document.querySelector('#eingabefelder input[type="text"][placeholder="Freie FTE"]').value=n.free_fte,document.querySelector('#eingabefelder input[type="text"][placeholder="Mail"]').value=n.e_mail,document.querySelector('#eingabefelder input[type="text"][placeholder="Tel. Nr."]').value=n.phone_number,document.querySelector('#eingabefelder input[type="text"][placeholder="Beschäftigungsstart YYYY-MM-DD"]').value=n.entry_date;let o="";switch(n.exp_lvl_description){case"Entry Level":o="1";break;case"Junior Level":o="2";break;case"Mid Level":o="3";break;case"Senior Level":o="4";break;case"Leitend":o="5";break;default:o=""}document.querySelector('#eingabefelder input[type="text"][placeholder="Erfahrungsgrad ID"]').value=o;let r="";switch(n.type_name){case"Intern":r="1";break;case"Extern":r="2";break;case"StudZubi":r="3";break;default:r=""}document.querySelector('#eingabefelder input[type="text"][placeholder="Typ ID"]').value=r,console.log(r),document.querySelector('#eingabefelder input[type="text"][placeholder="Adress ID"]').value=n.address_id}catch(e){console.error("Fehler beim Abrufen der Mitarbeiterinformationen:",e)}}async function applyEdit(e){if(validateInputs()){console.log("Bearbeiten angewendet:",e);var t=getInputsValues();console.log("Bearbeiten angewendet:",t),console.log(JSON.stringify(t));try{if(!(await fetch(`https://cioban.de/api/employee/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Bearbeiten des Projekts");console.log("Bearbeiten erfolgreich!"),displaySuccessMessage("Bearbeiten erfolgreich!")}catch(e){displayErrorMessage("Fehler beim Bearbeiten.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}async function applyDelete(){if(validateInputs()){var e=document.getElementById("eingabefelder").querySelector("input[type='text']").value;console.log("Löschen angewendet:",e);try{if(!(await fetch(`https://cioban.de/api/employee/${e}`,{method:"DELETE"})).ok)throw new Error("Fehler beim Löschen des Mitarbeiters");console.log("Löschen erfolgreich!"),displaySuccessMessage("Löschen erfolgreich!")}catch(e){displayErrorMessage("Fehler beim löschen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}async function applyCreate(){if(validateInputs()){var e=getInputsValues(),t=[e];console.log("Erstellen angewendet:",e),console.log(JSON.stringify(e));try{if(!(await fetch("https://cioban.de/api/employee",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Erstellen des Mitarbeiters");console.log("Erstellung erfolgreich!"),displaySuccessMessage("Erstellung erfolgreich!")}catch(e){displayErrorMessage("Fehler beim erstellen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}function openProjectPopup(){document.getElementById("popup-container-project").style.display="block",updateProjectInputs()}function closeProjectPopup(){document.getElementById("popup-container-project").style.display="none",document.getElementById("error-message-project").style.display="none",document.getElementById("success-message-project").style.display="none",location.reload()}function updateProjectInputs(){document.getElementById("error-message-project").style.display="none",document.getElementById("success-message-project").style.display="none";var e=document.getElementById("auswahl-project").value,t=document.getElementById("eingabefelder-project"),n=document.getElementById("buttons-project");t.innerHTML="",n.innerHTML="";var o=document.createElement("button");if(o.textContent="Schließen",o.className="btn text-truncate add-another-btn",o.style.color="black",o.onclick=closeProjectPopup,n.appendChild(o),"bearbeiten"===e)(r=document.createElement("input")).type="text",r.placeholder="ID",t.appendChild(r),(a=document.createElement("button")).textContent="Bearbeiten",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=applyProjectEdit,n.appendChild(a);else if("löschen"===e){var r;(r=document.createElement("input")).type="text",r.placeholder="ID",t.appendChild(r),(a=document.createElement("button")).textContent="Löschen",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=applyProjectDelete,n.appendChild(a)}else if("erstellen"===e){var a;["Bezeichnung","Abteilungs ID","Priorität","Projektmanager ID","Benötigte FTE","Aktuelle FTE","Startdatum (YYYY-MM-DD)","Enddatum (YYYY-MM-DD)","Team IDs"].forEach((function(e){var n=document.createElement("input");n.type="text",n.placeholder=e,t.appendChild(n)})),(a=document.createElement("button")).textContent="Erstellen",a.style.color="black",a.className="btn text-truncate add-another-btn",a.onclick=applyProjectCreate,n.appendChild(a)}}function validateProject(){for(var e=document.querySelectorAll('#eingabefelder-project input[type="text"]'),t=0;t<e.length;t++)if(""===e[t].value.trim())return!1;return!0}function getProjectInputValues(){var e=document.querySelectorAll('#eingabefelder-project input[type="text"]'),t={department_id:0,proj_name:"",proj_priority:"",proj_manager:0,needed_fte:0,current_fte:0,start_date:"",end_date:""};return e.forEach((function(e){var n=e.placeholder.toLowerCase(),o=e.value.trim();switch(n){case"bezeichnung":t.proj_name=o;break;case"abteilungs id":t.department_id=parseInt(o)||0;break;case"priorität":t.proj_priority=o;break;case"projektmanager id":t.proj_manager=parseInt(o)||0;break;case"benötigte fte":t.needed_fte=parseFloat(o)||0;break;case"aktuelle fte":t.current_fte=parseFloat(o)||0;break;case"startdatum (yyyy-mm-dd)":t.start_date=o;break;case"enddatum (yyyy-mm-dd)":t.end_date=o;break;case"team ids":t.team_ids=o}})),[t]}function displayErrorMessageProject(e){var t=document.getElementById("error-message-project");t.textContent=e,t.style.display="block",setTimeout((function(){t.style.display="none"}),7e3)}function displaySuccessMessageProject(e){var t=document.getElementById("success-message-project");t.textContent=e,t.style.display="block",t.style.color="green",setTimeout((function(){t.style.display="none"}),7e3)}async function applyProjectEdit(){if(validateProject()){var e=document.getElementById("eingabefelder-project").querySelector("input[type='text']").value,t=getProjectInputValues();try{if(!(await fetch(`https://cioban.de/api/project/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Bearbeiten des Projekts. Bitte füllen Sie alle Eingabefelder");console.log("Bearbeitung erfolgreich!"),displaySuccessMessageProject("Bearbeitung erfolgreich.")}catch(e){displayErrorMessageProject("Fehler beim bearbeiten.")}}else displayErrorMessageProject("Bitte füllen Sie das Eingabefeld aus")}async function applyProjectDelete(){if(validateProject()){var e=document.getElementById("eingabefelder-project").querySelector("input[type='text']").value;console.log("Löschen angewendet:",e);try{if(!(await fetch(`https://cioban.de/api/project/${e}`,{method:"DELETE"})).ok)throw new Error("Fehler beim Löschen des Projekts");console.log("Löschen erfolgreich!"),displaySuccessMessageProject("Löschen erfolgreich!")}catch(e){displayErrorMessageProject("Fehler beim löschen.")}}else displayErrorMessageProject("Bitte füllen Sie alle Eingabefelder aus.")}async function applyProjectCreate(){if(validateProject()){var e=getProjectInputValues();console.log("Erstellen angewendet:",e),console.log(JSON.stringify(e));try{if(!(await fetch("https://cioban.de/api/project",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Erstellen des Projekts");console.log("Erstellen erfolgreich!"),displaySuccessMessageProject("Erstellen erfolgreich!")}catch(e){displayErrorMessageProject("Fehler beim Erstellen.")}}else displayErrorMessageProject("Bitte füllen Sie alle Eingabefelder aus.")}function openProjectEditPersonalPopup(){document.getElementById("popup-container-projectEditPersonal").style.display="block",document.getElementById("popupContent-project").style.display="none",updateProjectEditPersonalInputs()}function closeEditPersonalPopup(){document.getElementById("popup-container-projectEditPersonal").style.display="none",document.getElementById("popupContent-project").style.display="block",document.getElementById("error-message-project").style.display="none"}function updateProjectEditPersonalInputs(){var e=document.getElementById("auswahl-projectEditPersonal").value,t=document.getElementById("eingabefelder-projectEditPersonal");if(t.innerHTML="","anzeigen"===e)fetch("https://cioban.de/api/employee").then((e=>e.json())).then((e=>{console.log(e);var n="<table style='overflow:auto'><tr><th>ID</th><th>Vorname</th><th>Name</th><th>Freie FTE</th><th>Mail</th><th>Tel. Nummer</th><th>Beschäftigungsstart</th><th>Erfahrungsgrad</th><th>Typ</th></tr>";e.personal.forEach((e=>{n+="<tr>",n+="<td>"+e.employee_id+"</td>",n+="<td>"+e.first_name+"</td>",n+="<td>"+e.last_name+"</td>",n+="<td>"+e.free_fte+"</td>",n+="<td>"+e.e_mail+"</td>",n+="<td>"+e.phone_number+"</td>",n+="<td>"+e.entry_date+"</td>",n+="<td>"+e.exp_lvl_description+"</td>",n+="<td>"+e.type_name+"</td>",n+="</tr>"})),n+="</table>",t.innerHTML=n})).catch((e=>console.log(e)));else if("hinzufügen"===e){var n=document.createElement("input");n.type="text",n.placeholder="Projekt ID",t.appendChild(n);var o=document.createElement("input");o.type="text",o.placeholder="Mitarbeiter ID",t.appendChild(o)}else if("löschen"===e){var r=document.createElement("input");r.type="text",r.placeholder="ID",t.appendChild(r)}}function applyEditPersonalChanges(){var e=document.querySelectorAll('#eingabefelder-projectEditPersonal input[type="text"]'),t=!0;if(e.forEach((function(e){""===e.value.trim()?(t=!1,e.classList.add("invalid")):e.classList.remove("invalid")})),t){document.getElementById("error-message-project").style.display="none";var n=[];e.forEach((function(e){n.push(e.value)})),console.log("Eingabefelder:",n.toString()),closeEditPersonalPopup()}else document.getElementById("error-message-project").style.display="block",document.getElementById("error-message-project").textContent="Alle Eingabefelder müssen ausgefüllt sein!"}function submitData(){const e=getDataByDropdown();Object.values(e).some((e=>null!==e&&""!==e))?fetch("https://cioban.de/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Response:",e)})).catch((e=>{console.error("There was an error with the fetch operation:",e)})):console.error("Bitte wählen Sie mindestens ein Dropdown-Menü aus.")}function getDataByDropdown(){const e=document.getElementById("departmentDropdown").value||null,t=document.getElementById("employeeTypeDropdown").value||null,n=document.getElementById("jobDropdown").value||null,o=document.getElementById("experienceDropdown").value||null,r=document.getElementById("skillDropdown").value||null,a=parseFloat(document.getElementById("fteDropdown").value)||null;var l=[{department:e,job:n,experienceLevel:o,project:document.getElementById("projectDropdown").value||null,type:t,skill:r,fte:a}];return console.log(l),l}function clearData(){document.getElementById("departmentDropdown").selectedIndex=0,document.getElementById("employeeTypeDropdown").selectedIndex=0,document.getElementById("jobDropdown").selectedIndex=0,document.getElementById("experienceDropdown").selectedIndex=0,document.getElementById("skillDropdown").selectedIndex=0,document.getElementById("fteDropdown").selectedIndex=0,document.getElementById("projectDropdown").selectedIndex=0}window.onload=function(){fetch("https://cioban.de/api/department").then((e=>e.json())).then((e=>{const t=document.getElementById("departmentDropdown");e.department.forEach((e=>{const n=document.createElement("option");n.value=e.department.dep_name,n.textContent=e.department.dep_name,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)})),fetch("https://cioban.de/api/type").then((e=>e.json())).then((e=>{const t=document.getElementById("employeeTypeDropdown");e.type.forEach((e=>{const n=document.createElement("option");n.value=e.type.type_name,n.textContent=e.type.type_name,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)})),fetch("https://cioban.de/api/job").then((e=>e.json())).then((e=>{const t=document.getElementById("jobDropdown");e.job.forEach((e=>{const n=document.createElement("option");n.value=e.job.job_name,n.textContent=e.job.job_name,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)})),fetch("https://cioban.de/api/project").then((e=>e.json())).then((e=>{const t=document.getElementById("projectDropdown");e.project.forEach((e=>{const n=document.createElement("option");n.value=e.project_name,n.textContent=e.project_name,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)})),fetch("https://cioban.de/api/experience_level").then((e=>e.json())).then((e=>{const t=document.getElementById("experienceDropdown");e.experience_level.forEach((e=>{const n=document.createElement("option");n.value=e.experience_level.exp_lvl_description,n.textContent=e.experience_level.exp_lvl_description,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)})),fetch("https://cioban.de/api/skill").then((e=>e.json())).then((e=>{const t=document.getElementById("skillDropdown");e.skill.forEach((e=>{const n=document.createElement("option");n.value=e.skill.skill_name,n.textContent=e.skill.skill_name,t.appendChild(n)}))})).catch((e=>{console.error("Error:",e)}))},document.addEventListener("DOMContentLoaded",(function(){for(var e=document.getElementById("personalTable"),t=document.getElementById("popupContainer"),n=document.getElementById("popupContent"),o=document.getElementById("rowData"),r=document.getElementById("closeBtn"),a=e.rows[0].cells.length,l=[],s=0;s<a;s++)l.push(e.rows[0].cells[s].innerHTML);n.style.padding="40px",n.style.borderRadius="20px",n.style.fontSize="16px",n.style.border="1px solid lightgrey",n.style.borderRadius="5px";var c=e.getElementsByTagName("tr");for(s=1;s<c.length;s++)c[s].onclick=function(){for(var e="",n=0;n<a;n++)e+=l[n]+": "+this.cells[n].innerHTML+"<br>";o.innerHTML=e,t.style.display="block"};r.onclick=function(){t.style.display="none"}})),document.addEventListener("DOMContentLoaded",(function(){for(var e=document.getElementById("projectTable"),t=document.getElementById("popupContainer-project"),n=document.getElementById("popupContent-project"),o=document.getElementById("rowData-project"),r=document.getElementById("closeBtn-project"),a=e.rows[0].cells.length,l=[],s=0;s<a;s++)l.push(e.rows[0].cells[s].innerHTML);n.style.padding="40px",n.style.borderRadius="20px",n.style.fontSize="16px",n.style.border="1px solid lightgrey",n.style.borderRadius="5px";var c=e.getElementsByTagName("tr");for(s=0;s<c.length;s++)c[s].onclick=function(){for(var e="",n=0;n<a;n++)e+=l[n]+": "+this.cells[n].innerHTML+"<br>";o.innerHTML=e,t.style.display="block"};r.onclick=function(){t.style.display="none"}})),$(document).ready((function(){$(".search-container #advanced-div").hide()})),$(".search-container .text-input").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".search-container .item-row-thumb").mouseenter((function(){$(this).siblings(".item-column-thumb-icon").animate({deg:-90},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#fff","background-color":"#F6C500"})})),$(".search-container .item-row-thumb").mouseleave((function(){$(".search-container .item-column-thumb-icon").animate({deg:0},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#F6C500","background-color":"#fff"})})),$(".search-container .text-input").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"4px",left:"45px","font-size":"12px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()})),$(".search-container #advanced-btn").click((function(){$(".search-container #advanced-div").slideToggle("fast"),$(this).text((function(e,t){return"Hide"===t?"Advanced":"Hide"}))})),$(document).ready((function(){$(".alertcontainer .search-sidebar").hide()})),$(".alertcontainer .linkbell").click((function(){$(".alertcontainer .search-sidebar").slideToggle("fast")})),$(".alertcontainer .text-input").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".alertcontainer textarea").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".alertcontainer textarea").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"8px",left:"45px","font-size":"10px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()})),$(".alertcontainer .item-row-thumb").mouseenter((function(){$(this).siblings(".item-column-thumb-icon").animate({deg:-90},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#fff","background-color":"#F6C500"})})),$(".alertcontainer .item-row-thumb").mouseleave((function(){$(".alertcontainer .item-column-thumb-icon").animate({deg:0},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#F6C500","background-color":"#fff"})})),$(".alertcontainer .text-input").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"8px",left:"45px","font-size":"10px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()}));