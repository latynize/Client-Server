function checkLogin(){window.location.href="01_startpage.html"}function openPopup(){document.getElementById("popup-container").style.display="block",updateInputs()}function closePopup(){document.getElementById("popup-container").style.display="none",document.getElementById("error-message").style.display="none",document.getElementById("success-message").style.display="none",location.reload()}function updateInputs(){document.getElementById("error-message").style.display="none",document.getElementById("success-message").style.display="none";var e=document.getElementById("auswahl").value,t=document.getElementById("eingabefelder"),n=document.getElementById("buttons");t.innerHTML="",n.innerHTML="";var a=document.createElement("button");if(a.textContent="Schließen",a.className="btn text-truncate add-another-btn",a.style.color="black",a.onclick=closePopup,n.appendChild(a),"bearbeiten"===e)(o=document.createElement("input")).type="text",o.placeholder="ID",t.appendChild(o),(r=document.createElement("button")).textContent="Bearbeiten",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyEdit,n.appendChild(r);else if("löschen"===e){var o;(o=document.createElement("input")).type="text",o.placeholder="ID",t.appendChild(o),(r=document.createElement("button")).textContent="Löschen",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyDelete,n.appendChild(r)}else if("erstellen"===e){var r;["Vorname","Name","Freie FTE","Mail","Tel. Nr.","Beschäftigungsstart YYYY-MM-DD","Erfahrungsgrad ID","Typ ID","Adress ID"].forEach((function(e){var n=document.createElement("input");n.type="text",n.placeholder=e,t.appendChild(n)})),(r=document.createElement("button")).textContent="Erstellen",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyCreate,n.appendChild(r)}}function validateInputs(){for(var e=document.querySelectorAll('#eingabefelder input[type="text"]'),t=0;t<e.length;t++)if(""!==e[t].value.trim())return!0;return!1}function getInputsValues(){var e=document.querySelectorAll('#eingabefelder input[type="text"]'),t=[{first_name:"",last_name:"",free_fte:0,e_mail:"",phone_number:"",entry_date:"",experience_level_id:0,type_id:0,address_id:0}];return e.forEach((function(e){var n=e.placeholder.toLowerCase(),a=e.value.trim();switch(n){case"vorname":t.first_name=a;break;case"name":t.last_name=a;break;case"freie fte":t.free_fte=parseFloat(a)||0;break;case"mail":t.e_mail=a;break;case"tel. nr.":t.phone_number=a;break;case"beschäftigungsstart":t.entry_date=a;break;case"erfahrungsgrad id":t.experience_level_id=parseInt(a)||0;break;case"typ id":t.type_id=parseInt(a)||0;break;case"adress id":t.address_id=parseInt(a)||0}})),t}function displayErrorMessage(e){var t=document.getElementById("error-message");t.textContent=e,t.style.display="block",setTimeout((function(){t.style.display="none"}),7e3)}function displaySuccessMessage(e){var t=document.getElementById("success-message");t.textContent=e,t.style.display="block",t.style.color="green",setTimeout((function(){t.style.display="none"}),7e3)}async function applyEdit(){if(validateInputs()){var e=document.getElementById("eingabefelder").querySelector("input[type='text']").value,t=getInputsValues();console.log("Bearbeiten angewendet:",t);try{if(!(await fetch(`https://cioban.de/api/employee/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Bearbeiten des Mitarbeiters. Bitte füllen Sie alle Eingabefelder");console.log("Bearbeitung erfolgreich!"),displaySuccessMessage("Bearbeitung erfolgreich!")}catch(e){displayErrorMessage("Fehler beim bearbeiten.")}}else displayErrorMessage("Bitte füllen Sie das Eingabefeld aus.")}async function applyDelete(){if(validateInputs()){var e=document.getElementById("eingabefelder").querySelector("input[type='text']").value;console.log("Löschen angewendet:",e);try{if(!(await fetch(`https://cioban.de/api/employee/${e}`,{method:"DELETE"})).ok)throw new Error("Fehler beim Löschen des Mitarbeiters");console.log("Löschen erfolgreich!"),displaySuccessMessage("Löschen erfolgreich!")}catch(e){displayErrorMessage("Fehler beim löschen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}async function applyCreate(){if(validateInputs()){var e=getInputsValues();console.log("Erstellen angewendet:",e),console.log(JSON.stringify(e));try{if(!(await fetch("https://cioban.de/api/employee",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Erstellen des Mitarbeiters");console.log("Erstellung erfolgreich!"),displaySuccessMessage("Erstellung erfolgreich!")}catch(e){displayErrorMessage("Fehler beim erstellen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}function openProjectPopup(){document.getElementById("popup-container-project").style.display="block",updateProjectInputs()}function closeProjectPopup(){document.getElementById("popup-container-project").style.display="none",document.getElementById("error-message-project").style.display="none",document.getElementById("success-message-project").style.display="none",location.reload()}function updateProjectInputs(){document.getElementById("error-message-project").style.display="none",document.getElementById("success-message-project").style.display="none";var e=document.getElementById("auswahl-project").value,t=document.getElementById("eingabefelder-project"),n=document.getElementById("buttons-project");t.innerHTML="",n.innerHTML="";var a=document.createElement("button");if(a.textContent="Schließen",a.className="btn text-truncate add-another-btn",a.style.color="black",a.onclick=closeProjectPopup,n.appendChild(a),"bearbeiten"===e)(o=document.createElement("input")).type="text",o.placeholder="ID",t.appendChild(o),(r=document.createElement("button")).textContent="Bearbeiten",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyProjectEdit,n.appendChild(r);else if("löschen"===e){var o;(o=document.createElement("input")).type="text",o.placeholder="ID",t.appendChild(o),(r=document.createElement("button")).textContent="Löschen",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyProjectDelete,n.appendChild(r)}else if("erstellen"===e){var r;["Bezeichnung","Abteilung","Priorität","Projektmanager","Benötigte FTE","Aktuelle FTE","Startdatum","Enddatum","Team IDs"].forEach((function(e){var n=document.createElement("input");n.type="text",n.placeholder=e,t.appendChild(n)})),(r=document.createElement("button")).textContent="Erstellen",r.style.color="black",r.className="btn text-truncate add-another-btn",r.onclick=applyProjectCreate,n.appendChild(r)}}function validateProject(){for(var e=document.querySelectorAll('#eingabefelder-project input[type="text"]'),t=0;t<e.length;t++)if(""!==e[t].value.trim())return!0;return!1}function getProjectInputValues(){var e=document.querySelectorAll('#eingabefelder-project input[type="text"]'),t=[{department_id:0,proj_name:"",proj_priority:"",proj_manager:0,needed_fte:0,current_fte:0,start_date:"",end_date:""}];return e.forEach((function(e){var n=e.placeholder.toLowerCase(),a=e.value.trim();switch(n){case"bezeichnung":t.proj_name=a;break;case"abteilung":t.department_id=parseInt(a)||0;break;case"priorität":t.proj_priority=a;break;case"projektmanager":t.proj_manager=parseInt(a)||0;break;case"benötigte fte":t.needed_fte=parseFloat(a)||0;break;case"aktuelle fte":t.current_fte=parseFloat(a)||0;break;case"startdatum":t.start_date=a;break;case"enddatum":t.end_date=a;break;case"team ids":t.team_ids=a}})),t}function displayErrorMessage(e){var t=document.getElementById("error-message-project");t.textContent=e,t.style.display="block",setTimeout((function(){t.style.display="none"}),7e3)}function displaySuccessMessage(e){var t=document.getElementById("success-message-project");t.textContent=e,t.style.display="block",t.style.color="green",setTimeout((function(){t.style.display="none"}),7e3)}async function applyProjectEdit(){if(validateProject()){var e=document.getElementById("eingabefelder-project").querySelector("input[type='text']").value,t=getProjectInputValues();try{if(!(await fetch(`https://cioban.de/api/project/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Bearbeiten des Projekts. Bitte füllen Sie alle Eingabefelder");console.log("Bearbeitung erfolgreich!"),displaySuccessMessage("Bearbeitung erfolgreich.")}catch(e){displayErrorMessage("Fehler beim bearbeiten.")}}else displayErrorMessage("Bitte füllen Sie das Eingabefeld aus")}async function applyProjectDelete(){if(validateProject()){var e=document.getElementById("eingabefelder-project").querySelector("input[type='text']").value;console.log("Löschen angewendet:",e);try{if(!(await fetch(`https://cioban.de/api/project/${e}`,{method:"DELETE"})).ok)throw new Error("Fehler beim Löschen des Projekts");console.log("Löschen erfolgreich!"),displaySuccessMessage("Löschen erfolgreich!")}catch(e){displayErrorMessage("Fehler beim löschen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}async function applyProjectCreate(){if(validateProject()){var e=getProjectInputValues();console.log("Erstellen angewendet:",e),console.log(JSON.stringify(e));try{if(!(await fetch("https://cioban.de/api/project",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fehler beim Erstellen des Projekts");console.log("Erstellen erfolgreich!"),displaySuccessMessage("Erstellen erfolgreich!")}catch(e){displayErrorMessage("Fehler beim Erstellen.")}}else displayErrorMessage("Bitte füllen Sie alle Eingabefelder aus.")}function openProjectEditPersonalPopup(){document.getElementById("popup-container-projectEditPersonal").style.display="block",document.getElementById("popupContent-project").style.display="none",updateProjectEditPersonalInputs()}function closeEditPersonalPopup(){document.getElementById("popup-container-projectEditPersonal").style.display="none",document.getElementById("popupContent-project").style.display="block",document.getElementById("error-message-project").style.display="none"}function updateProjectEditPersonalInputs(){var e=document.getElementById("auswahl-projectEditPersonal").value,t=document.getElementById("eingabefelder-projectEditPersonal");if(t.innerHTML="","anzeigen"===e)fetch("https://cioban.de/api/employee").then((e=>e.json())).then((e=>{console.log(e);var n="<table style='overflow:auto'><tr><th>ID</th><th>Vorname</th><th>Name</th><th>Freie FTE</th><th>Mail</th><th>Tel. Nummer</th><th>Beschäftigungsstart</th><th>Erfahrungsgrad</th><th>Typ</th></tr>";e.personal.forEach((e=>{n+="<tr>",n+="<td>"+e.employee_id+"</td>",n+="<td>"+e.first_name+"</td>",n+="<td>"+e.last_name+"</td>",n+="<td>"+e.free_fte+"</td>",n+="<td>"+e.e_mail+"</td>",n+="<td>"+e.phone_number+"</td>",n+="<td>"+e.entry_date+"</td>",n+="<td>"+e.exp_lvl_description+"</td>",n+="<td>"+e.type_name+"</td>",n+="</tr>"})),n+="</table>",t.innerHTML=n})).catch((e=>console.log(e)));else if("hinzufügen"===e){var n=document.createElement("input");n.type="text",n.placeholder="Projekt ID",t.appendChild(n);var a=document.createElement("input");a.type="text",a.placeholder="Mitarbeiter ID",t.appendChild(a)}else if("löschen"===e){var o=document.createElement("input");o.type="text",o.placeholder="ID",t.appendChild(o)}}function applyEditPersonalChanges(){var e=document.querySelectorAll('#eingabefelder-projectEditPersonal input[type="text"]'),t=!0;if(e.forEach((function(e){""===e.value.trim()?(t=!1,e.classList.add("invalid")):e.classList.remove("invalid")})),t){document.getElementById("error-message-project").style.display="none";var n=[];e.forEach((function(e){n.push(e.value)})),console.log("Eingabefelder:",n.toString()),closeEditPersonalPopup()}else document.getElementById("error-message-project").style.display="block",document.getElementById("error-message-project").textContent="Alle Eingabefelder müssen ausgefüllt sein!"}function submitData(){for(var e=document.getElementsByTagName("select"),t=[],n=0;n<e.length;n++){var a=e[n],o=a.value;o&&t.push({id:a.id,value:o})}for(var r=0;r<t.length;r++){var l=t[r];console.log("Dropdown ID: "+l.id+", Ausgewählter Wert: "+l.value)}}function clearData(){}document.addEventListener("DOMContentLoaded",(function(){for(var e=document.getElementById("personalTable"),t=document.getElementById("popupContainer"),n=document.getElementById("popupContent"),a=document.getElementById("rowData"),o=document.getElementById("closeBtn"),r=e.rows[0].cells.length,l=[],s=0;s<r;s++)l.push(e.rows[0].cells[s].innerHTML);n.style.padding="40px",n.style.borderRadius="20px",n.style.fontSize="16px",n.style.border="1px solid lightgrey",n.style.borderRadius="5px";var i=e.getElementsByTagName("tr");for(s=1;s<i.length;s++)i[s].onclick=function(){for(var e="",n=0;n<r;n++)e+=l[n]+": "+this.cells[n].innerHTML+"<br>";a.innerHTML=e,t.style.display="block"};o.onclick=function(){t.style.display="none"}})),document.addEventListener("DOMContentLoaded",(function(){for(var e=document.getElementById("projectTable"),t=document.getElementById("popupContainer-project"),n=document.getElementById("popupContent-project"),a=document.getElementById("rowData-project"),o=document.getElementById("closeBtn-project"),r=e.rows[0].cells.length,l=[],s=0;s<r;s++)l.push(e.rows[0].cells[s].innerHTML);n.style.padding="40px",n.style.borderRadius="20px",n.style.fontSize="16px",n.style.border="1px solid lightgrey",n.style.borderRadius="5px";var i=e.getElementsByTagName("tr");for(s=0;s<i.length;s++)i[s].onclick=function(){for(var e="",n=0;n<r;n++)e+=l[n]+": "+this.cells[n].innerHTML+"<br>";a.innerHTML=e,t.style.display="block"};o.onclick=function(){t.style.display="none"}})),$(document).ready((function(){$(".search-container #advanced-div").hide()})),$(".search-container .text-input").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".search-container .item-row-thumb").mouseenter((function(){$(this).siblings(".item-column-thumb-icon").animate({deg:-90},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#fff","background-color":"#F6C500"})})),$(".search-container .item-row-thumb").mouseleave((function(){$(".search-container .item-column-thumb-icon").animate({deg:0},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#F6C500","background-color":"#fff"})})),$(".search-container .text-input").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"4px",left:"45px","font-size":"12px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()})),$(".search-container #advanced-btn").click((function(){$(".search-container #advanced-div").slideToggle("fast"),$(this).text((function(e,t){return"Hide"===t?"Advanced":"Hide"}))})),$(document).ready((function(){$(".alertcontainer .search-sidebar").hide()})),$(".alertcontainer .linkbell").click((function(){$(".alertcontainer .search-sidebar").slideToggle("fast")})),$(".alertcontainer .text-input").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".alertcontainer textarea").focusin((function(){$(this).siblings("span").animate({top:"-8px",left:"22px","font-size":"8px",color:"#000"},200),$(this).siblings("span").css({color:"rgb(173, 124, 46)"})})),$(".alertcontainer textarea").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"8px",left:"45px","font-size":"10px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()})),$(".alertcontainer .item-row-thumb").mouseenter((function(){$(this).siblings(".item-column-thumb-icon").animate({deg:-90},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#fff","background-color":"#F6C500"})})),$(".alertcontainer .item-row-thumb").mouseleave((function(){$(".alertcontainer .item-column-thumb-icon").animate({deg:0},{duration:100,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}).css({color:"#F6C500","background-color":"#fff"})})),$(".alertcontainer .text-input").focusout((function(){0===$(this).val().length?($(this).siblings("span").show(),$(this).siblings("span").animate({top:"8px",left:"45px","font-size":"10px"},200),$(this).siblings("span").css({color:"rgb(190, 190, 190)"})):$(this).siblings("span").hide()}));