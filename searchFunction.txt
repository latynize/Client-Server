function searchFunction(data,res){
            let query = null;

    if(data!=null){
        const dataArray = Object.values(data);
        dataArray.forEach((element, index) => {
            if (index < dataArray.length - 1) { // Überprüfen, ob es ein nächstes Element gibt

            if(element=="department"){ 
                if(query==null){
                   query = `SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                   FROM employee
                   INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                   INNER JOIN type ON employee.type_ID = type.type_ID
                   INNER JOIN connection_team_employee ON employee.employee_ID = connection_team_employee.employee_ID
                   INNER JOIN team ON connection_team_employee.team_ID = team.team_ID
                   INNER JOIN project ON team.project_ID = project.project_ID
                   INNER JOIN department ON project.department_ID = department.department_ID
                   WHERE department.dep_name ="`+dataArray[index+1]+`"`;
            }else{
                   query += `INTERSECT
                   SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                   FROM employee
                   INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                   INNER JOIN type ON employee.type_ID = type.type_ID
                   INNER JOIN connection_team_employee ON employee.employee_ID = connection_team_employee.employee_ID
                   INNER JOIN team ON connection_team_employee.team_ID = team.team_ID
                   INNER JOIN project ON team.project_ID = project.project_ID
                   INNER JOIN department ON project.department_ID = department.department_ID
                   WHERE department.dep_name ="`+dataArray[index+1]+`"`;
        }
            }else if(element=="job"){
                if(query==null){
                    query=`SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN internal ON employee.employee_ID = internal.employee_ID
                    INNER JOIN job AS internal_job ON internal.job_ID = internal_job.job_ID
                    WHERE job.job_name ="`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN external ON employee.employee_ID = external.employee_ID
                    INNER JOIN job AS external_job ON external.job_ID = external_job.job_ID
                    WHERE job.job_name ="`+dataArray[index+1]+`"`;
                }else{
                    query+=`INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN internal ON employee.employee_ID = internal.employee_ID
                    INNER JOIN job AS internal_job ON internal.job_ID = internal_job.job_ID
                    WHERE job.job_name ="`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN external ON employee.employee_ID = external.employee_ID
                    INNER JOIN job AS external_job ON external.job_ID = external_job.job_ID
                    WHERE job.job_name = "`+dataArray[index+1]+`"`;
            }
            }
            else if(element=="experienceLevel"){
                if(query==null){
                    query= `SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE experience_level.exp_lvl_description="`+dataArray[index+1]+`"`;
                }else{
                    query+= `INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE experience_level.exp_lvl_description="`+dataArray[index+1]+`"`;
                }
            }
            else if(element=="project"){
                if(query==null){
                    query=`SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN connection_team_employee ON employee.employee_ID = connection_team_employee.employee_ID
                    INNER JOIN team ON connection_team_employee.team_ID = team.team_ID
                    INNER JOIN project ON team.project_ID = project.project_ID
                    WHERE project.proj_name ="`+dataArray[index+1]+`"`;
                }else{
                    query+=`INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN connection_team_employee ON employee.employee_ID = connection_team_employee.employee_ID
                    INNER JOIN team ON connection_team_employee.team_ID = team.team_ID
                    INNER JOIN project ON team.project_ID = project.project_ID
                    WHERE project.proj_name = "`+dataArray[index+1]+`"`;
                }
            }
            else if(element=="personal"){
                if(query==null){
                    query=`SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE type.type_name = "`+dataArray[index+1]+`"`;
                }else{
                    query+=`INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE type.type_name = "`+dataArray[index+1]+`"`;
                }
            }
            else if(element=="skill"){
                if(query==null){
                    query= `SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN internal ON employee.employee_ID = internal.employee_ID
                    INNER JOIN job ON internal.job_ID = job.job_ID
                    INNER JOIN connection_job_skill ON job.job_ID = connection_job_skill.job_ID
                    INNER JOIN skill ON connection_job_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name ="`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN external ON employee.employee_ID = external.employee_ID
                    INNER JOIN job ON external.job_ID = job.job_ID
                    INNER JOIN connection_job_skill ON job.job_ID = connection_job_skill.job_ID
                    INNER JOIN skill ON connection_job_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name = "`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN stat ON employee.employee_ID = stat.employee_ID 
                    INNER JOIN education_degree ON stat.education_ID = education_degree.education_ID
                    INNER JOIN connection_education_skill ON education_degree.education_ID = connection_education_skill.education_ID
                    INNER JOIN skill ON connection_education_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name ="`+dataArray[index+1]+`"`;
                }else{
                    query+= `INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN internal ON employee.employee_ID = internal.employee_ID
                    INNER JOIN job ON internal.job_ID = job.job_ID
                    INNER JOIN connection_job_skill ON job.job_ID = connection_job_skill.job_ID
                    INNER JOIN skill ON connection_job_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name = "`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN external ON employee.employee_ID = external.employee_ID
                    INNER JOIN job ON external.job_ID = job.job_ID
                    INNER JOIN connection_job_skill ON job.job_ID = connection_job_skill.job_ID
                    INNER JOIN skill ON connection_job_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name ="`+dataArray[index+1]+`"
                    UNION
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    INNER JOIN stat ON employee.employee_ID = stat.employee_ID 
                    INNER JOIN education_degree ON stat.education_ID = education_degree.education_ID
                    INNER JOIN connection_education_skill ON education_degree.education_ID = connection_education_skill.education_ID
                    INNER JOIN skill ON connection_education_skill.skill_ID = skill.skill_ID
                    WHERE skill.skill_name = "`+dataArray[index+1]+`"`;
                }
            }
            else if(element=="fte"){
                if(query==null){
                    query =`SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE employee.free_fte="`+dataArray[index+1]+`"`;
                }else{
                    query +=`INTERSECT
                    SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name
                    FROM employee
                    INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
                    INNER JOIN type ON employee.type_ID = type.type_ID
                    WHERE employee.free_fte="`+dataArray[index+1]+`"`;
                }
            } 
        }

        });
   
}else {
        query = `
        SELECT employee.employee_ID, employee.first_name, employee.last_name, employee.free_fte, employee.e_mail, experience_level.exp_lvl_description, type.type_name 
        FROM employee
        INNER JOIN experience_level ON employee.experience_level_ID = experience_level.experience_level_ID
        INNER JOIN type ON employee.type_ID = type.type_ID`;
    } 
    console.log("query unten",query);
 return query;
}